# Implementation Plan: Consistent Table Styling for Submenus

**Branch**: `004-submenu-table-style` | **Date**: 2026-02-17 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/004-submenu-table-style/spec.md`

**Note**: This template is filled in by the `/speckit.plan` command. See `.specify/templates/commands/plan.md` for the execution workflow.

## Summary

Extend the visual improvements from Feature 003 (table layout with bold headers, horizontal separators, inverse video selection) to submenu screens and help screen. Apply Lipgloss styling patterns directly without reusing the full Table component, maintaining visual consistency across the entire application. Targets: container submenu (P1), image submenu (P2), help screen (P3 - 4 sections).

## Technical Context

**Language/Version**: Go 1.21+ (tested on Go 1.26.0)  
**Primary Dependencies**: Bubbletea v1.2.4 (TUI framework), Lipgloss v1.0.0 (styling), Bubbles v0.20.0  
**Storage**: N/A (display-only feature)  
**Testing**: Manual testing (go build + visual verification in Terminal.app/iTerm2)  
**Target Platform**: macOS 26.x on Apple Silicon (Terminal.app, iTerm2)  
**Project Type**: Single project (CLI TUI application)  
**Performance Goals**: <50ms render time per screen update, instant selection response  
**Constraints**: Terminal width responsiveness (minimum 80 chars), no external API calls  
**Scale/Scope**: 4 screen files modified (container_submenu.go, image_submenu.go, help.go, daemon_control.go - if applicable), ~200-300 lines of View() method updates

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### Principle I: Command-Safe TUI
✅ **COMPLIANT** - Display-only changes. No new commands, no CLI interactions modified. Existing command preview and confirmation flows remain unchanged.

### Principle II: macOS 26.x + Apple Silicon Target
✅ **COMPLIANT** - No platform changes. Lipgloss and Bubbletea styling work natively on macOS Terminal.app and iTerm2. Bold and inverse video are standard ANSI features.

### Principle III: Local-Only Operation
✅ **COMPLIANT** - Pure UI rendering. No storage, no network, no external dependencies. Feature updates visual presentation only.

### Principle IV: Clear Observability
✅ **COMPLIANT** - Improves observability through better visual hierarchy (bold headers, separators). Makes menu structure clearer. No logging or stdout/stderr changes.

### Principle V: Tested Command Contracts
✅ **COMPLIANT** - No command contract changes. Manual visual testing sufficient (resize behavior, selection visibility). No automated tests required for display-only updates.

### Platform and Runtime Constraints
✅ **COMPLIANT** - No CLI backend changes, no daemon interaction, no configuration file changes, no privilege escalation. Pure TUI presentation layer.

### Workflow and Quality Gates
✅ **COMPLIANT** - No command mapping changes, no destructive action changes, no dry-run path modifications. Manual verification on macOS 26.x required before merge (same as Feature 003).

**GATE RESULT**: ✅ **ALL CHECKS PASSED** - Feature is display-only with no governance violations. Post-Phase 1 re-check: No changes, still compliant.

## Project Structure

### Documentation (this feature)

```text
specs/[###-feature]/
├── plan.md              # This file (/speckit.plan command output)
├── research.md          # Phase 0 output (/speckit.plan command)
├── data-model.md        # Phase 1 output (/speckit.plan command)
├── quickstart.md        # Phase 1 output (/speckit.plan command)
├── contracts/           # Phase 1 output (/speckit.plan command)
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

### Source Code (repository root)

```text
src/ui/
├── container_submenu.go   # P1: Add bold headers, separators, inverse selection
├── image_submenu.go        # P2: Add bold headers, separators, inverse selection  
├── help.go                 # P3: Reorganize into 4 sections with separators
└── daemon_control.go       # P4 (optional): Apply same styling if submenu-like

tests/
└── (no new test files - manual visual testing)

specs/004-submenu-table-style/
├── spec.md                 # Feature requirements (3 user stories)
├── research.md             # Design decisions (5 research tasks)
├── data-model.md           # Display patterns (MenuSection, MenuItem, etc.)
├── contracts/
│   └── styling-patterns.md # View() structure contracts
├── plan.md                 # This file
├── quickstart.md           # Implementation guide
└── tasks.md                # Task breakdown (generated by /speckit.tasks)
```

**Structure Decision**: Single project structure (Option 1). Files to modify are all in `src/ui/` directory. No new models, services, or CLI changes required - pure View() method refactoring. Follows same pattern as Feature 003 which modified `container_list.go` and `image_list.go`.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

**No violations detected.** All constitutional principles are satisfied. This section remains empty.
